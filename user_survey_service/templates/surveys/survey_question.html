{% extends 'base.html' %}

{% block content %}
    <h2 align="center" style="color: navy;">Текущий Опрос: {{ survey.title }}</h2>
    <div style="margin-left: 40px; margin-right: 40px; color: #333;">
        <form id="surveyForm" method="post" action="{% url 'surveys:survey_question' survey_slug=survey.slug question_slug=question.slug %}">
            {% csrf_token %}
            <input type="hidden" name="parent_answer_id" value="{{ parent_answer.id }}">
            <br>
            <h3>{{ question.title }}</h3>

            {% if question.choices.exists %}
                <!-- Радиокнопочки для выбора одного ответа из списка (предоставленный ответ) -->
                {% for choice in question.choices.all %}
                    <input type="radio" id="choice_{{ choice.id }}" name="question_{{ question.id }}" value="{{ choice.id }}" required>
                    <label for="choice_{{ choice.id }}">{{ choice.text }}</label><br>
                {% endfor %}
            {% else %}
                <!-- Если вопрос не имеет вариантов ответов, выводим текстовое поле -->
                <input type="text" name="question_{{ question.id }}" required>
            {% endif %}

            <button type="submit">Отправить выбранный ответ</button>
        </form>
    </div>

    <script>
        $(document).ready(function () {
            // Исправляем обработчик клика на кнопку с правильным id
            $("#submitFormBtn").click(function () {
                $("#surveyForm").submit(); // Вызываем метод submit формы
            });
        });
    </script>
{% endblock %}